\doxysection{Common\+Render\+Resources.\+h}
\hypertarget{_common_render_resources_8h_source}{}\label{_common_render_resources_8h_source}\index{Dark Engine/Source/Runtime/Renderer/public/CommonRenderResources.h@{Dark Engine/Source/Runtime/Renderer/public/CommonRenderResources.h}}
\mbox{\hyperlink{_common_render_resources_8h}{См. документацию.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_math_fwd_8h}{Math/MathFwd.h}}"{}}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_r_h_i_resources_8h}{RHIResources.h}}"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_dynamic_r_h_i_8h}{DynamicRHI.h}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_render_resource_8h}{RenderResource.h}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_global_resource_8h}{GlobalResource.h}}"{}}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_f_filter_vertex}{FFilterVertex}}}
\DoxyCodeLine{00010\ \{}
\DoxyCodeLine{00011\ \ \ \ \ \mbox{\hyperlink{struct_d_e_1_1_math_1_1_t_vector4}{FVector4f}}\ \mbox{\hyperlink{struct_f_filter_vertex_adb9912b6930178be53bad30c3b04aaac}{Position}};}
\DoxyCodeLine{00012\ \ \ \ \ \mbox{\hyperlink{struct_d_e_1_1_math_1_1_t_vector2}{FVector2f}}\ \mbox{\hyperlink{struct_f_filter_vertex_a23e39a5a8a42841fc5b3b7a0d7beaa07}{UV}};}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \ \ \ \ \mbox{\hyperlink{struct_f_filter_vertex_af4245d39b1a03124085b9d6574e1d60f}{FFilterVertex}}()}
\DoxyCodeLine{00015\ \ \ \ \ \{\}}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \ \ \ \ \mbox{\hyperlink{struct_f_filter_vertex_a1fef945e3b81766c32ea2af1bc165ed3}{FFilterVertex}}(\mbox{\hyperlink{struct_d_e_1_1_math_1_1_t_vector4}{FVector4f}}\ InPositon,\ \mbox{\hyperlink{struct_d_e_1_1_math_1_1_t_vector2}{FVector2f}}\ InUV)\ :\ }
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_f_filter_vertex_adb9912b6930178be53bad30c3b04aaac}{Position}}(InPositon),}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_f_filter_vertex_a23e39a5a8a42841fc5b3b7a0d7beaa07}{UV}}(InUV)}
\DoxyCodeLine{00020\ \ \ \ \ \{\}}
\DoxyCodeLine{00021\ \};}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_f_filter_vertex_declaration}{FFilterVertexDeclaration}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_f_render_resource}{FRenderResource}}}
\DoxyCodeLine{00025\ \{}
\DoxyCodeLine{00026\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00027\ \ \ \ \ TRefCountPtr<FRHIVertexDeclaration>\ \mbox{\hyperlink{class_f_filter_vertex_declaration_a18c82e3ba6917f16d54883fdaf9b3221}{VertexDeclaration}};}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_filter_vertex_declaration_a263d4b67343e134f342e8f13ba5018d1}{InitRHI}}(\mbox{\hyperlink{class_f_r_h_i_command_list_immediate}{FRHICommandListImmediate}}\&\ RHICmdList)}
\DoxyCodeLine{00030\ \ \ \ \ \{}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_t_array}{FVertexDeclarationElementList}}\ Elements;}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_platform_8h_a55934b7aafc849240fa69ea0339c0ab7}{uint16}}\ Stride\ =\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{struct_f_filter_vertex}{FFilterVertex}});}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ Elements.\mbox{\hyperlink{class_t_array_a27e18ffaa6dfeadac0e08e11c9b512a7}{Add}}(\mbox{\hyperlink{struct_f_vertex_element}{FVertexElement}}(\mbox{\hyperlink{_r_h_i_defines_8h_a5ba013d0ba7c7b1e63e78d1b19238b1faacda3767ab1528fa359718576d182938}{VET\_Float4}},\ 0,\ 0,\ 0,\ Stride));}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ Elements.Add(\mbox{\hyperlink{struct_f_vertex_element}{FVertexElement}}(\mbox{\hyperlink{_r_h_i_defines_8h_a5ba013d0ba7c7b1e63e78d1b19238b1fafeeb7b8235277b46cc2fef914e72c37d}{VET\_Float2}},\ 1,\ 0,\ 0,\ Stride));}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_f_filter_vertex_declaration_a18c82e3ba6917f16d54883fdaf9b3221}{VertexDeclaration}}\ =\ \mbox{\hyperlink{_dynamic_r_h_i_8h_a7517b77b859e55ad7c2bd4b4d932faf3}{RHICreateVertexDeclaration}}(Elements);}
\DoxyCodeLine{00036\ \ \ \ \ \}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{comment}{//void\ Init()}}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{comment}{//\{}}
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{comment}{//\ \ FVertexDeclarationElementList\ Elements;}}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{comment}{//\ \ uint16\ Stride\ =\ sizeof(FFilterVertex);}}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{comment}{//\ \ Elements.Add(FVertexElement(VET\_Float4,\ 0,\ 0,\ 0,\ Stride));}}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{comment}{//\ \ Elements.Add(FVertexElement(VET\_Float2,\ 1,\ 0,\ 0,\ Stride));}}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{comment}{//\ \ VertexDeclaration\ =\ RHICreateVertexDeclaration(Elements);}}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{comment}{//\}}}
\DoxyCodeLine{00046\ \};}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_f_screen_rectangle_vertex_buffer}{FScreenRectangleVertexBuffer}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_f_render_resource}{FRenderResource}}}
\DoxyCodeLine{00049\ \{}
\DoxyCodeLine{00050\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00051\ \ \ \ \ TRefCountPtr<FRHIBuffer>\ \mbox{\hyperlink{class_f_screen_rectangle_vertex_buffer_a34290d187459a0ae7e0dbe088b9c5192}{VertexBuffer}};}
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_screen_rectangle_vertex_buffer_a5acc88004d416594ed43b943f9db1d0b}{InitRHI}}(\mbox{\hyperlink{class_f_r_h_i_command_list_immediate}{FRHICommandListImmediate}}\&\ RHICmdList)}
\DoxyCodeLine{00053\ \ \ \ \ \{}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ TArray<FFilterVertex>\ Vertices(6);}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ Vertices[0].Position\ =\ \mbox{\hyperlink{_math_fwd_8h_ae3748a9ac5b66c35924636537c4a8107}{FVector4f}}(-\/1,\ -\/1,\ 0,\ 1);}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ Vertices[0].UV\ =\ \mbox{\hyperlink{_math_fwd_8h_a510e17bc5de77a23a40752fe0ebfdd72}{FVector2f}}(0.f,\ 1.f);}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ Vertices[1].Position\ =\ \mbox{\hyperlink{_math_fwd_8h_ae3748a9ac5b66c35924636537c4a8107}{FVector4f}}(-\/1,\ 1,\ 0,\ 1);}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ Vertices[1].UV\ =\ \mbox{\hyperlink{_math_fwd_8h_a510e17bc5de77a23a40752fe0ebfdd72}{FVector2f}}(0.f,\ 0);}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ Vertices[2].Position\ =\ \mbox{\hyperlink{_math_fwd_8h_ae3748a9ac5b66c35924636537c4a8107}{FVector4f}}(1,\ 1,\ 0,\ 1);}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ Vertices[2].UV\ =\ \mbox{\hyperlink{_math_fwd_8h_a510e17bc5de77a23a40752fe0ebfdd72}{FVector2f}}(1.f,\ 0);}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ Vertices[3].Position\ =\ \mbox{\hyperlink{_math_fwd_8h_ae3748a9ac5b66c35924636537c4a8107}{FVector4f}}(1,\ -\/1,\ 0,\ 1);}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ Vertices[3].UV\ =\ \mbox{\hyperlink{_math_fwd_8h_a510e17bc5de77a23a40752fe0ebfdd72}{FVector2f}}(1.f,\ 1);}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ Vertices[4].Position\ =\ \mbox{\hyperlink{_math_fwd_8h_ae3748a9ac5b66c35924636537c4a8107}{FVector4f}}(0,\ 1,\ 0,\ 1);}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ Vertices[4].UV\ =\ \mbox{\hyperlink{_math_fwd_8h_a510e17bc5de77a23a40752fe0ebfdd72}{FVector2f}}(0.5f,\ 0);}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ Vertices[5].Position\ =\ \mbox{\hyperlink{_math_fwd_8h_ae3748a9ac5b66c35924636537c4a8107}{FVector4f}}(0,\ -\/1,\ 0,\ 1);}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ Vertices[5].UV\ =\ \mbox{\hyperlink{_math_fwd_8h_a510e17bc5de77a23a40752fe0ebfdd72}{FVector2f}}(0.5f,\ 1);}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_f_screen_rectangle_vertex_buffer_a34290d187459a0ae7e0dbe088b9c5192}{VertexBuffer}}\ =\ \mbox{\hyperlink{_dynamic_r_h_i_8h_a9f813715cdf25d3557fa66873b435201}{RHICreateBuffer}}(\mbox{\hyperlink{struct_f_r_h_i_buffer_desc}{FRHIBufferDesc}}(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{struct_f_filter_vertex}{FFilterVertex}})\ *\ Vertices.Num(),}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{struct_f_filter_vertex}{FFilterVertex}})),\ \mbox{\hyperlink{_platform_8h_a2978f60d40d64f3605b5a99f66f292a9}{TEXT}}(\textcolor{stringliteral}{"{}FScreenRectangleVertexBuffer"{}}),\ \mbox{\hyperlink{_r_h_i_defines_8h_a790a925a3358fc56173b2ffb0f607c5f}{ERHIAccess}}(\mbox{\hyperlink{_r_h_i_defines_8h_a790a925a3358fc56173b2ffb0f607c5fa9b4ca42c29ad44078049099371cf37ae}{ERHIAccess::VertexOrIndexBuffer}}));}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ Data\ =\ \mbox{\hyperlink{_dynamic_r_h_i_8h_a4e523b52ef7c31b49d6321fae61270ba}{RHILockBuffer}}(\mbox{\hyperlink{class_f_screen_rectangle_vertex_buffer_a34290d187459a0ae7e0dbe088b9c5192}{VertexBuffer}}.Get(),\ 0,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{struct_f_filter_vertex}{FFilterVertex}})\ *\ Vertices.Num(),\ \mbox{\hyperlink{_r_h_i_defines_8h_a74b58e6e8443baea529ab6f701abadb7a29070f058d91713586e592d3c49b9523}{RLM\_WriteOnly}});}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_f_memory_a6bfb397a8ea2e226f6fe27664c9880ca}{FMemory::Memcpy}}(Data,\ Vertices.GetData(),\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{struct_f_filter_vertex}{FFilterVertex}})\ *\ Vertices.Num());}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_dynamic_r_h_i_8h_a884dd5454688e9402c4e13f4e671370b}{RHIUnlockBuffer}}(\mbox{\hyperlink{class_f_screen_rectangle_vertex_buffer_a34290d187459a0ae7e0dbe088b9c5192}{VertexBuffer}}.Get());}
\DoxyCodeLine{00082\ \ \ \ \ \}}
\DoxyCodeLine{00083\ \ \ \ \ }
\DoxyCodeLine{00084\ \};}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_f_screen_rectangle_index_buffer}{FScreenRectangleIndexBuffer}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_f_render_resource}{FRenderResource}}}
\DoxyCodeLine{00087\ \{}
\DoxyCodeLine{00088\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00089\ \ \ \ \ TRefCountPtr<FRHIBuffer>\ \mbox{\hyperlink{class_f_screen_rectangle_index_buffer_a761fe45c4c13eb4b5ee0bba3de675d9e}{IndexBuffer}};}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00091\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_screen_rectangle_index_buffer_a70a1ac847fb9409d7b70b49b0cbfe739}{InitRHI}}(\mbox{\hyperlink{class_f_r_h_i_command_list_immediate}{FRHICommandListImmediate}}\&\ RHICmdList)}
\DoxyCodeLine{00092\ \ \ \ \ \{}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ TArray<uint16>\ Indices\ =}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ 1,\ 3,\ 1,\ 2,\ 3,\ \textcolor{comment}{//\ Quad}}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ 4,\ 3\ \textcolor{comment}{//\ Triangle}}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_f_screen_rectangle_index_buffer_a761fe45c4c13eb4b5ee0bba3de675d9e}{IndexBuffer}}\ =\ \mbox{\hyperlink{_dynamic_r_h_i_8h_a9f813715cdf25d3557fa66873b435201}{RHICreateBuffer}}(\mbox{\hyperlink{struct_f_r_h_i_buffer_desc}{FRHIBufferDesc}}(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{_platform_8h_a55934b7aafc849240fa69ea0339c0ab7}{uint16}})\ *\ Indices.GetSize(),}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{_platform_8h_a55934b7aafc849240fa69ea0339c0ab7}{uint16}})),\ \mbox{\hyperlink{_platform_8h_a2978f60d40d64f3605b5a99f66f292a9}{TEXT}}(\textcolor{stringliteral}{"{}FScreenRectangleIndexBuffer"{}}),}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_r_h_i_defines_8h_a790a925a3358fc56173b2ffb0f607c5fa9b4ca42c29ad44078049099371cf37ae}{ERHIAccess::VertexOrIndexBuffer}});}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}*\ Data\ =\ \mbox{\hyperlink{_dynamic_r_h_i_8h_a4e523b52ef7c31b49d6321fae61270ba}{RHILockBuffer}}(\mbox{\hyperlink{class_f_screen_rectangle_index_buffer_a761fe45c4c13eb4b5ee0bba3de675d9e}{IndexBuffer}}.Get(),\ 0,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{_platform_8h_a55934b7aafc849240fa69ea0339c0ab7}{uint16}})\ *\ Indices.GetSize(),\ \mbox{\hyperlink{_r_h_i_defines_8h_a74b58e6e8443baea529ab6f701abadb7a29070f058d91713586e592d3c49b9523}{RLM\_WriteOnly}});}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_f_memory_a6bfb397a8ea2e226f6fe27664c9880ca}{FMemory::Memcpy}}(Data,\ Indices.GetData(),\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{_platform_8h_a55934b7aafc849240fa69ea0339c0ab7}{uint16}})\ *\ Indices.GetSize());}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_dynamic_r_h_i_8h_a884dd5454688e9402c4e13f4e671370b}{RHIUnlockBuffer}}(\mbox{\hyperlink{class_f_screen_rectangle_index_buffer_a761fe45c4c13eb4b5ee0bba3de675d9e}{IndexBuffer}}.Get());}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00108\ \ \ \ \ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \};}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \textcolor{keyword}{extern}\ TGlobalRenderResource<FScreenRectangleVertexBuffer>\ \ \mbox{\hyperlink{_common_render_resources_8h_ac0630135eb46a4b6a45b640c1bd9762a}{GRenctangleVertexBuffer}};}
\DoxyCodeLine{00113\ \textcolor{keyword}{extern}\ TGlobalRenderResource<FScreenRectangleIndexBuffer>\ \mbox{\hyperlink{_common_render_resources_8h_a373165a7f928bf9b0e6898b2407336ac}{GRenctangleIndexBuffer}};}
\DoxyCodeLine{00114\ \textcolor{keyword}{extern}\ TGlobalRenderResource<FFilterVertexDeclaration>\ \ \mbox{\hyperlink{_common_render_resources_8h_aa59fa97a418adb24c1c88381c0f01772}{GFilterVertexDeclaration}};}

\end{DoxyCode}
