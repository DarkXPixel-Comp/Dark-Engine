\doxysection{D3\+D12\+Adapter.\+h}
\hypertarget{_d3_d12_adapter_8h_source}{}\label{_d3_d12_adapter_8h_source}\index{Dark Engine/Source/Runtime/D3D12RHI/private/D3D12Adapter.h@{Dark Engine/Source/Runtime/D3D12RHI/private/D3D12Adapter.h}}
\mbox{\hyperlink{_d3_d12_adapter_8h}{См. документацию.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_dark_template_8h}{Templates/DarkTemplate.h}}"{}}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_d3_d12_r_h_i_private_8h}{D3D12RHIPrivate.h}}"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_static_array_8h}{Containers/StaticArray.h}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_d3_d12_viewport_8h}{D3D12Viewport.h}}"{}}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <wrl.h>}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{keyword}{using\ }Microsoft::WRL::ComPtr;}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_f_d3_d12_device_basic_info}{FD3D12DeviceBasicInfo}}}
\DoxyCodeLine{00014\ \{}
\DoxyCodeLine{00015\ \ \ \ \ D3D\_FEATURE\_LEVEL\ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_f_d3_d12_device_basic_info_ac16799fa5291443a6515b052a8afe1f6}{MaxFeatureLevel}};}
\DoxyCodeLine{00016\ \ \ \ \ D3D\_SHADER\_MODEL\ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_f_d3_d12_device_basic_info_a5e05080835cbf1be2b2e0ae15d7ade59}{MaxShaderModel}};}
\DoxyCodeLine{00017\ \ \ \ \ D3D12\_RESOURCE\_BINDING\_TIER\ \mbox{\hyperlink{struct_f_d3_d12_device_basic_info_ae14a55ce2bd39e4df352d1037e2edf48}{ResourceBindingTier}};}
\DoxyCodeLine{00018\ \ \ \ \ D3D12\_RESOURCE\_HEAP\_TIER\ \ \ \ \mbox{\hyperlink{struct_f_d3_d12_device_basic_info_a7a24d0076c2d07d007bdd6c0bb538717}{ResourceHeapTier}};}
\DoxyCodeLine{00019\ \ \ \ \ \mbox{\hyperlink{_platform_8h_a8c7a127091efbdfc5a16939041653e05}{uint32}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{struct_f_d3_d12_device_basic_info_a26fa572d2cf4af251b74043bc2d1fcba}{NumDeviceNodes}};}
\DoxyCodeLine{00020\ \};}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_f_d3_d12_adapter_desc}{FD3D12AdapterDesc}}}
\DoxyCodeLine{00025\ \{}
\DoxyCodeLine{00026\ \ \ \ \ \mbox{\hyperlink{struct_f_d3_d12_adapter_desc_ae3706bc5138b5d3fa84b3605ea1a41a5}{FD3D12AdapterDesc}}();}
\DoxyCodeLine{00027\ \ \ \ \ \mbox{\hyperlink{struct_f_d3_d12_adapter_desc_ae3706bc5138b5d3fa84b3605ea1a41a5}{FD3D12AdapterDesc}}(\textcolor{keyword}{const}\ DXGI\_ADAPTER\_DESC\&\ InDesc,\ \mbox{\hyperlink{_platform_8h_a84083085985fb180ad38b9c32e3937da}{int32}}\ InAdapterIndex);}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{struct_f_d3_d12_adapter_desc_a5be702429d3b6ab9f52596b2c51ae515}{IsValid}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keyword}{static}\ HRESULT\ \mbox{\hyperlink{struct_f_d3_d12_adapter_desc_a447e4737a2e2d02ae130655be53f43d1}{EnumAdapters}}(\mbox{\hyperlink{_platform_8h_a84083085985fb180ad38b9c32e3937da}{int32}}\ \mbox{\hyperlink{struct_f_d3_d12_adapter_desc_a26ddc1eb5b8876c139d9115ad3d3fca9}{AdapterIndex}},\ DXGI\_GPU\_PREFERENCE\ GPUPreference,}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ IDXGIFactory7*\ DXGIFactory,\ IDXGIAdapter**\ TempAdapter);}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ DXGI\_ADAPTER\_DESC\ \mbox{\hyperlink{struct_f_d3_d12_adapter_desc_aa6232bbe8d72c128cc9274f05c864b15}{Desc}}\ =\ \{\};}
\DoxyCodeLine{00039\ \ \ \ \ \mbox{\hyperlink{_platform_8h_a84083085985fb180ad38b9c32e3937da}{int32}}\ \mbox{\hyperlink{struct_f_d3_d12_adapter_desc_a26ddc1eb5b8876c139d9115ad3d3fca9}{AdapterIndex}}\ =\ -\/1;}
\DoxyCodeLine{00040\ \ \ \ \ D3D\_FEATURE\_LEVEL\ \mbox{\hyperlink{struct_f_d3_d12_adapter_desc_a6ba668babe2476b128ef08ff36d097a2}{MaxSupportFeatureLevel}};}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \};}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00049\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_f_d3_d12_adapter}{FD3D12Adapter}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_f_noncopyble}{FNoncopyble}}}
\DoxyCodeLine{00050\ \{}
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_f_d3_d12_dynamic_r_h_i}{FD3D12DynamicRHI}};}
\DoxyCodeLine{00052\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00053\ \ \ \ \ \mbox{\hyperlink{class_f_d3_d12_adapter_a840be72e5344d676640683309686acfd}{FD3D12Adapter}}(\mbox{\hyperlink{struct_f_d3_d12_adapter_desc}{FD3D12AdapterDesc}}\&\ DescIn);}
\DoxyCodeLine{00054\ \ \ \ \ \mbox{\hyperlink{class_f_d3_d12_adapter_a8777eae67231f4936165e3c2f0bf6b01}{\string~FD3D12Adapter}}();}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_d3_d12_adapter_ae1e09fc2e3c90ed1c3628bd8c15cb1cf}{Destroy}}();}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_d3_d12_adapter_a5e0a9ce01cb682a39c2bac6fc0c4880e}{InitializeDevices}}();}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{_platform_8h_a84083085985fb180ad38b9c32e3937da}{int32}}\ \mbox{\hyperlink{class_f_d3_d12_adapter_a65f38881454c6ef6cfb258f2ba4cd1c0}{GetAdapterIndex}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ Desc.\mbox{\hyperlink{struct_f_d3_d12_adapter_desc_a26ddc1eb5b8876c139d9115ad3d3fca9}{AdapterIndex}};\ \}}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keyword}{const}\ D3D\_FEATURE\_LEVEL\ \mbox{\hyperlink{class_f_d3_d12_adapter_aa50cd8e462b78a0264ddf2529f4ad309}{GetFeatureLevel}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ Desc.\mbox{\hyperlink{struct_f_d3_d12_adapter_desc_a6ba668babe2476b128ef08ff36d097a2}{MaxSupportFeatureLevel}};\ \}}
\DoxyCodeLine{00063\ \ \ \ \ ID3D12Device*\ \mbox{\hyperlink{class_f_d3_d12_adapter_a3455589b2188d1be67ad6b50bbcb7afa}{GetD3DDevice}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ RootDevice.Get();\ \}}
\DoxyCodeLine{00064\ \ \ \ \ ID3D12Device2*\ \mbox{\hyperlink{class_f_d3_d12_adapter_a4e784d85f0931197ee8c2dba483ca9f9}{GetD3DDevice2}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ RootDevice2.Get();\ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_f_d3_d12_adapter_desc}{FD3D12AdapterDesc}}\&\ \mbox{\hyperlink{class_f_d3_d12_adapter_a4a5efa1ee3553f2f268569a157291e42}{GetDesc}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ Desc;\ \}}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keyword}{const}\ DXGI\_ADAPTER\_DESC\&\ \mbox{\hyperlink{class_f_d3_d12_adapter_a551d4c77e94c5e358cdb8905ad9881ac}{GetAdapterDesc}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ Desc.\mbox{\hyperlink{struct_f_d3_d12_adapter_desc_aa6232bbe8d72c128cc9274f05c864b15}{Desc}};\ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ IDXGIAdapter4*\ \mbox{\hyperlink{class_f_d3_d12_adapter_a0a5ef7e84ce0078a308297f70539ee06}{GetAdapter}}()\ \{\ \textcolor{keywordflow}{return}\ DXGIAdapter.Get();\ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ IDXGIFactory5*\ \mbox{\hyperlink{class_f_d3_d12_adapter_a2292fce797153e660cb4dee79b2cd547}{GetDXGIFactory}}()\textcolor{keyword}{\ \ \ const\ }\{\ \textcolor{keywordflow}{return}\ DXGIFactory.Get();\ \}}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_d3_d12_adapter_afec340664a96a35be262c9df31e77c8d}{CreateRootDevice}}(\textcolor{keywordtype}{bool}\ bWithDebug\ =\ \textcolor{keyword}{false});}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_d3_d12_adapter_af5a4d93876b22ece6a7af8ada9a6cdd3}{CreateDXGIFactory}}(\textcolor{keywordtype}{bool}\ bWithDebug\ =\ \textcolor{keyword}{false});}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \mbox{\hyperlink{class_f_d3_d12_device}{FD3D12Device}}*\ \mbox{\hyperlink{class_f_d3_d12_adapter_afd19fb597ad3119547777e03de6587dc}{GetDevice}}(\mbox{\hyperlink{_platform_8h_a8c7a127091efbdfc5a16939041653e05}{uint32}}\ Index\ =\ 0)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ Devices[Index].get();\ \}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \ \ TArray<FD3D12Viewport*>\&\ \mbox{\hyperlink{class_f_d3_d12_adapter_a31747012cf345b973adb7fd4f51e6f4b}{GetViewports}}()\ \{\ \textcolor{keywordflow}{return}\ Viewports;\ \}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_d3_d12_adapter_ae884a695b02d1de9935efc39db636a22}{SetDrawingViewport}}(\mbox{\hyperlink{class_f_d3_d12_viewport}{FD3D12Viewport}}*\ InViewport)\ \{\ DrawingViewport\ =\ InViewport;\ \}}
\DoxyCodeLine{00081\ \ \ \ \ \mbox{\hyperlink{class_f_d3_d12_viewport}{FD3D12Viewport}}*\ \mbox{\hyperlink{class_f_d3_d12_adapter_a72755931f91ceba2a7dd2dce0b7d4d3e}{GetDrawingViewport}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ DrawingViewport;\ \}}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_f_d3_d12_root_signature_manager}{FD3D12RootSignatureManager}}*\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_f_d3_d12_adapter_ae7482ed426fc7f9ecafa642e4bfac868}{RootSignatureManager}};}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00088\ \ \ \ \ \mbox{\hyperlink{struct_f_d3_d12_adapter_desc}{FD3D12AdapterDesc}}\ Desc\ =\ \{\};}
\DoxyCodeLine{00089\ \ \ \ \ ComPtr<ID3D12Device>\ RootDevice;}
\DoxyCodeLine{00090\ \ \ \ \ ComPtr<ID3D12Device2>\ RootDevice2;}
\DoxyCodeLine{00091\ \ \ \ \ ComPtr<IDXGIFactory7>\ DXGIFactory;}
\DoxyCodeLine{00092\ \ \ \ \ ComPtr<IDXGIAdapter4>\ DXGIAdapter;}
\DoxyCodeLine{00093\ \ \ \ \ TStaticArray<TSharedPtr<FD3D12Device>,\ 1>\ Devices;}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ ComPtr<ID3D12InfoQueue1>\ InfoQueue;}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keywordtype}{bool}\ bDebugDevice;}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keywordtype}{bool}\ bDeviceCreated;}
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keywordtype}{bool}\ bDestroyed\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \ \ TArray<FD3D12Viewport*>\ Viewports;}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \ \ \mbox{\hyperlink{class_f_d3_d12_viewport}{FD3D12Viewport}}*\ DrawingViewport;}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \};}

\end{DoxyCode}
