\doxysection{D3\+D12\+Texture.\+h}
\hypertarget{_d3_d12_r_h_i_2private_2_d3_d12_texture_8h_source}{}\label{_d3_d12_r_h_i_2private_2_d3_d12_texture_8h_source}\index{Dark Engine/Source/Runtime/D3D12RHI/private/D3D12Texture.h@{Dark Engine/Source/Runtime/D3D12RHI/private/D3D12Texture.h}}
\mbox{\hyperlink{_d3_d12_r_h_i_2private_2_d3_d12_texture_8h}{См. документацию.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_d3_d12_resources_8h}{D3D12Resources.h}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_r_h_i_resources_8h}{RHIResources.h}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_unordored_map_8h}{Containers/UnordoredMap.h}}"{}}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_f_d3_d12_texture}{FD3D12Texture}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_f_r_h_i_texture}{FRHITexture}},\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_f_d3_d12_device_child}{FD3D12DeviceChild}}}
\DoxyCodeLine{00013\ \{}
\DoxyCodeLine{00014\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00015\ \ \ \ \ \mbox{\hyperlink{class_f_d3_d12_texture_a726d806617ac2017e79898bfac39b305}{FD3D12Texture}}()\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \ \ \ \ \mbox{\hyperlink{class_f_d3_d12_texture_af352df8241821766f9edb6835d617b2c}{FD3D12Texture}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_f_r_h_i_texture_create_desc}{FRHITextureCreateDesc}}\&\ InDesc,}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class}\ \mbox{\hyperlink{class_f_d3_d12_device}{FD3D12Device}}*\ InParent):}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_f_r_h_i_texture}{FRHITexture}}(InDesc),}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_f_d3_d12_device_child}{FD3D12DeviceChild}}(InParent)}
\DoxyCodeLine{00021\ \ \ \ \ \{\}}
\DoxyCodeLine{00022\ }
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_d3_d12_texture_a4281ec397da5c2230ed2bb42540e6f05}{AddSRV}}(\textcolor{keyword}{const}\ D3D12\_SHADER\_RESOURCE\_VIEW\_DESC\&\ SRVDesc);}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_d3_d12_texture_a458312ad8b62ad21291cf05719d20bbd}{SetNumRTV}}(\mbox{\hyperlink{_platform_8h_a84083085985fb180ad38b9c32e3937da}{int32}}\ Num)}
\DoxyCodeLine{00025\ \ \ \ \ \{}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_f_d3_d12_texture_a18c44ef899d4c6385d466dcd24cf3793}{RenderTargetViews}}.\mbox{\hyperlink{class_t_array_a1e6aa393e57ba5ba2e349e2cb161da51}{Resize}}(Num);}
\DoxyCodeLine{00027\ \ \ \ \ \}}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_d3_d12_texture_a5abaa76c5bae8e2f6f228d47417cc20e}{EmplaceRTV}}(D3D12\_RENDER\_TARGET\_VIEW\_DESC\ \textcolor{keyword}{const}\&\ RTVDesc,\ \mbox{\hyperlink{_platform_8h_a84083085985fb180ad38b9c32e3937da}{int32}}\ Index);}
\DoxyCodeLine{00029\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_d3_d12_texture_aac82706990f72e04c2846e32bb03f386}{EmplaceDSV}}(D3D12\_DEPTH\_STENCIL\_VIEW\_DESC\ \textcolor{keyword}{const}\&\ DSVDesc,\ \mbox{\hyperlink{_platform_8h_a84083085985fb180ad38b9c32e3937da}{int32}}\ Index);}
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_d3_d12_texture_aef4113b2e8cd6d09af3d572ddd027095}{EmplaceSRV}}(D3D12\_SHADER\_RESOURCE\_VIEW\_DESC\ \textcolor{keyword}{const}\&\ SRVDesc);}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ \ \ \mbox{\hyperlink{class_f_d3_d12_resource}{FD3D12Resource}}*\ \mbox{\hyperlink{class_f_d3_d12_texture_aad79c193282f416b2f573548f5b1a07b}{GetResource}}()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{_d3_d12_main_8h_ab8eaee8f45f36954297ee6146eb6db20}{Resource}}.Get();\ \}}
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_d3_d12_texture_afb1b504c97fd882ac02014635f28650e}{SetResource}}(\mbox{\hyperlink{class_f_d3_d12_resource}{FD3D12Resource}}*\ InResource);}
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_d3_d12_texture_afd001e4688d1fd1c63a8716da102fe6a}{CreateViews}}();}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{struct_d_e_1_1_math_1_1_t_int_point}{FIntPoint}}\ \mbox{\hyperlink{class_f_d3_d12_texture_ab1a5101d98bd6070d765904373d83f91}{GetSize}}()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{class_f_d3_d12_texture_a8e1adbcc24d75ef86980a6f44b45b847}{GetNativeShaderResourceView}}()\ \textcolor{keyword}{const\ override};}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordtype}{void}*\ \mbox{\hyperlink{class_f_d3_d12_texture_ab158cf8901d5eea90b00ca2596d58d7e}{Lock}}(\textcolor{keyword}{class}\ \mbox{\hyperlink{class_f_r_h_i_command_list_immediate}{FRHICommandListImmediate}}*\ RHICmdList,\ \mbox{\hyperlink{_platform_8h_a8c7a127091efbdfc5a16939041653e05}{uint32}}\ MipIndex,\ \mbox{\hyperlink{_platform_8h_a8c7a127091efbdfc5a16939041653e05}{uint32}}\ ArrayIndex,\ \mbox{\hyperlink{_r_h_i_defines_8h_a74b58e6e8443baea529ab6f701abadb7}{EResourceLockMode}}\ LockMode,}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{_platform_8h_a8c7a127091efbdfc5a16939041653e05}{uint32}}\&\ DestStride,\ \mbox{\hyperlink{_platform_8h_afddf25cca147311c233b23a9d3329bb4}{uint64}}*\ OutLockedByteCount\ =\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_d3_d12_texture_aa5930b8b15312bed5fa068f54a65941a}{Unlock}}(\textcolor{keyword}{class}\ \mbox{\hyperlink{class_f_r_h_i_command_list_immediate}{FRHICommandListImmediate}}*\ RHICmdList,\ \mbox{\hyperlink{_platform_8h_a8c7a127091efbdfc5a16939041653e05}{uint32}}\ MipIndex,\ \mbox{\hyperlink{_platform_8h_a8c7a127091efbdfc5a16939041653e05}{uint32}}\ ArrayIndex);}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_d3_d12_texture_a5c7658f2ffcf949ecb7d78df3ed7b08a}{UpdateTexture}}(\mbox{\hyperlink{_platform_8h_a8c7a127091efbdfc5a16939041653e05}{uint32}}\ MipIndex,\ \mbox{\hyperlink{_platform_8h_a8c7a127091efbdfc5a16939041653e05}{uint32}}\ DestX,\ \mbox{\hyperlink{_platform_8h_a8c7a127091efbdfc5a16939041653e05}{uint32}}\ DestY,\ \mbox{\hyperlink{_platform_8h_a8c7a127091efbdfc5a16939041653e05}{uint32}}\ DestZ,}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ D3D12\_TEXTURE\_COPY\_LOCATION\&\ SourceCopyLocation);}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keyword}{static}\ D3D12\_RESOURCE\_DESC\ \mbox{\hyperlink{class_f_d3_d12_texture_a71bab57ec5e814552efd074dd96fdcff}{GetResourceDescFromTextureDesc}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_f_r_h_i_texture_create_desc}{FRHITextureCreateDesc}}\&\ InDesc);}
\DoxyCodeLine{00047\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00048\ \ \ \ \ TArray<TSharedPtr<class\ FD3D12RenderTargetView>>\ \mbox{\hyperlink{class_f_d3_d12_texture_a18c44ef899d4c6385d466dcd24cf3793}{RenderTargetViews}};}
\DoxyCodeLine{00049\ \ \ \ \ TSharedPtr<class\ FD3D12ShaderResourceView>\ \mbox{\hyperlink{class_f_d3_d12_texture_a18e70b321014f64e1808faf067c7fe4a}{ShaderResourceView}};}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00052\ \ \ \ \ D3D12\_GPU\_VIRTUAL\_ADDRESS\ GPUVirtualAddress;}
\DoxyCodeLine{00053\ \ \ \ \ TRefCountPtr<FD3D12Resource>\ \mbox{\hyperlink{_d3_d12_main_8h_ab8eaee8f45f36954297ee6146eb6db20}{Resource}};}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \ \ \ \ TMap<uint32,\ FD3D12LockedResource*>\ LockedMap;}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \};}

\end{DoxyCode}
